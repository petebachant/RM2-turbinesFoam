/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  3.0.x                                 |
|   \\  /    A nd           | Web:      www.OpenFOAM.org                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "system";
    object      fvOptions;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //


turbine
{
    type            crossFlowTurbineALSource;
    active          on;

    crossFlowTurbineALSourceCoeffs
    {
        fieldNames      (U);
        selectionMode   cellSet;    // cellSet // points //cellZone
        cellSet         turbine;
        nBlades	        3;
        addedMass       on;

        freeStreamVelocity (1 0 0);
        tipSpeedRatio   3.1;

        origin          (0 0 0);
        axis            (0 0 1); // negative for opposite rotation
        rotorRadius     0.5375; // for tip speed ratio calculation

        dynamicStall
        {
            active              on;
            dynamicStallModel   LeishmanBeddoesSGC;
        }

        flowCurvature
        {
            active              off;
            flowCurvatureModel  Goude;
        }

        blades
        {
            blade1
            {
                writePerf   true;
                nElements  24;
                endEffects  off;
                elementProfiles (NACA0021);
                elementData
                ( // axialDistance, radius, azimuth, chord, chordMount, pitch
                    (-0.4 0.5375 0.0 0.040 0.5 0.0)
                    ( 0.0 0.5375 0.0 0.067 0.5 0.0)
                    ( 0.4 0.5375 0.0 0.040 0.5 0.0)
                );
            }
            blade2
            {
                $blade1;
                writePerf   false;
                azimuthalOffset 120;
            }
            blade3
            {
                $blade2;
                azimuthalOffset 240;
            }
        }

        struts
        {
            strut1
            {
                nElements   8;
                elementProfiles (NACA0021);
                elementData
                ( // axialDistance, radius, azimuth, chord, chordMount, pitch
                    (0.0 0.04 0.0 0.06 0.5 0.0)
                    (0.0 0.53 0.0 0.06 0.5 0.0)
                );
            }
            strut2
            {
                $strut1;
                azimuthalOffset 120;
            }
            strut3
            {
                $strut1;
                azimuthalOffset 240;
            }
        }

        shaft
        {
            nElements   21;
            elementProfiles (cylinder);
            elementData
            ( // axialDistance, diameter
                (-0.66 0.0635)
                ( 0.66 0.0635)
            );
        }

        profileData
        {
            NACA0021
            {
                tableType   singleRe;
                Re          1.6e5;
                data        (#include "NACA0021_1.6e5");
                ReList      (4e4 8e4 1.6e5 3.6e5 7e5 1e6 2e6 5e6);
                clData      (#include "NACA0021_multiRe_cl");
                cdData      (#include "NACA0021_multiRe_cd");
                cmData      (#include "NACA0021_multiRe_cm");
            }
            cylinder
            {
                data // alpha_deg cl cd
                (
                    (-180 0 1.1)
                    (180 0 1.1)
                );
            }
        }
    }
}

// ************************************************************************* //
